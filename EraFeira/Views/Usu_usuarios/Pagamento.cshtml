@model EraFeira.Models.Fdp_forma_pagamento

@{
    ViewBag.Title = "Pagamento";
    Layout = "~/Views/Shared/_Layout3.cshtml";
}

<link rel="stylesheet" href="~/Content/Pagamento.css">

<div class="pag-section">


    <div class="pag-summary">

        <h1 class="pag-summary-h1"> Resumo </h1>

        
        <div class="row resi">

            <div class="col-lg-5 ">

                <h2 class="pag-summary-h2"> total Cesta(s) </h2>
            </div>
            <div class="col-lg-2 ">

                <div class="pag-orange-summary"></div>
            </div>
            <div class="col-lg-5 ">

                <p class="pag-standard-text"> R$<span class="pag-span-1"></span><br /> <span class="pag-span-2"></span> <span class="pag-span-4">Cestas Mensais</span> <br /> <span class="pag-span-3">*Frete incluso no valor total</span></p>
            </div>
        </div>

    </div>

    <div class="pag-main">

        <h3 class="pag-main-h3"> Escolha a melhor forma de pagamento</h3>

        <div class="row resi-2">

            <div class="col-lg-6">

                <a href="https://pagseguro.uol.com.br/para-seu-negocio/online/tela-de-pagamento" target="_blank"><img id="pag" class="pag-card" src="~/Imagens/pagseguro-logo.png" /></a>
               
                <div class="pag-orange-card"></div>

            </div>
            <div class="col-lg-6 ">
                <img class="pag-card-2" src="~/Imagens/barcode.svg" />
                <h5 class="pag-main-h5"> Boleto Bancário </h5>
                <div class="pag-orange-card-2"></div>
            </div>

            <div class="col-lg-12">
                <h6 id="status-pag"class="pag-main-h6"> Aguardando Confirmacao de pagamento </h6>
                
            </div>
            <div class="col-lg-12">

           
                @Html.ActionLink("Finalizar pagamento", "Agradecimento", "Usu_usuarios", new { area = "" }, new { @class = "pag-input-end", @id = "pag-input-end-1" })

            </div>
        </div>



    </div>
    

</div>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>

    $(document).ready(function () {

        Ler2("configCestas")
    })
    $(document).ready(function () {
        var cont = 0;
        var cont1 = 0;
        var cont2 = 0;
        var cont3 = 0;
        var total = 0;
        if (getCookie("CarrinhoCookie1") != "") {

            var cookie = getCookie("CarrinhoCookie1");
            var teste = JSON.parse(cookie);

            var vetor = [];
            vetor = teste[3];

            var a = vetor.split("-")
            cont += parseFloat(a[3])
        }
        total += parseFloat(cont)

        if (getCookie("CarrinhoCookie2") != "") {

            var cookie = getCookie("CarrinhoCookie2");
            var teste = JSON.parse(cookie);

            var vetor = [];
            vetor = teste[3];

            var a = vetor.split("-")
            cont1 += parseFloat(a[3])
        }

        total += parseFloat(cont1)

        if (getCookie("CarrinhoCookie3") != "") {

            var cookie = getCookie("CarrinhoCookie3");
            var teste = JSON.parse(cookie);

            var vetor = [];
            vetor = teste[3];

            var a = vetor.split("-")
            cont2 += parseFloat(a[3])
        }
        total += parseFloat(cont2)
        if (getCookie("CarrinhoCookie4") != "") {

            var cookie = getCookie("CarrinhoCookie4");
            var teste = JSON.parse(cookie);

            var vetor = [];
            vetor = teste[3];

            var a = vetor.split("-")
            cont3 += parseFloat(a[3])
        }
        total += parseFloat(cont3)
        $(".pag-span-1").text(total.toFixed(2))


    })

    function Ler2(nameCookie) {
        if (getCookie(nameCookie) != null) {
            var cookie1 = getCookie(nameCookie);
            var x = JSON.parse(cookie1);

            // $("#valor").append("<li> Valor Total" + ax[0] + "</li>")
            $(".pag-span-2").text(x[0])


        }
    }

     function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    $("#pag").click(function () {

        $("#status-pag").text("Selecionado PagSeguro").addClass("colorized").fadeOut(7000, function () {

            if ($("#status-pag").is(':hidden')) {

                $("#status-pag").text("Pagamento finalizado").addClass("colorized-2").fadeIn(1000);
                $("#pag-input-end-1").fadeIn(1000).show();
}

        })

        

    })


</script>
